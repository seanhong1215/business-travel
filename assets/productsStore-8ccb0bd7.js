import{J as o,n as r,S as i,K as c,L as n}from"./index-5e667ba6.js";const h=o("productsStroe",{state:()=>({products:[],product:{},pagination:{},isLoading:!1,isActive:"",currentPage:1,category:"",favorite:JSON.parse(localStorage.getItem("favorite"))||[]}),actions:{getProducts(){this.isLoading=!0,r().then(t=>{this.isLoading=!1,this.products=t.data.products}).catch(t=>{this.isLoading=!1,i.fire({icon:"error",title:t.response.data.message})})},getProductId(t){this.isLoading=!0,c(t).then(s=>{this.isLoading=!1,this.product=s.data.product}).catch(s=>{this.isLoading=!1,i.fire({icon:"error",title:s.response.data.message})})},toggleFavorite(t){const s=this.favorite.findIndex(e=>e===t);s===-1?(this.favorite.push(t),i.fire({icon:"success",title:"已加入收藏"})):(this.favorite.splice(s,1),i.fire({icon:"success",title:"已移除收藏"}))},getProductSort(t=1,s){this.isActive=s,this.currentPage=t,this.isLoading=!0;let e=`https://vue3-course-api.hexschool.io/v2/api/shinyhung/products?page=${t}`;s?e=`https://vue3-course-api.hexschool.io/v2/api/shinyhung/products?category=${s}`:this.isActive="all",n.get(e).then(a=>{this.isLoading=!1,this.products=a.data.products,this.pagination=a.data.pagination}).catch(a=>{this.isLoading=!1,i.fire({icon:"error",title:a.response.data.message})})}},getters:{}});export{h as p};
