import{_ as u,a as h,c as i,b as p,d as e,F as f,r as v,f as g,o,g as b,h as m,t as n,p as y,i as L}from"./index-65aa15c9.js";const k={name:"FavoriteList",data(){return{products:[],favoritesList:[],isLoading:!1,id:"",favorite:JSON.parse(localStorage.getItem("favorite"))||[]}},methods:{getProducts(){this.isLoading=!0,h().then(t=>{this.products=t.data.products,this.getFavorites(),this.isLoading=!1}).catch(t=>{this.$swal.fire({icon:"danger",title:"找不到收藏清單"})})},getFavorites(){this.favoritesList=this.products.filter(t=>this.favorite.indexOf(t.id)>-1)},toggleFavorite(t){const r=this.favorite.findIndex(c=>c===t);r===-1?(this.favorite.push(t),this.$swal.fire({icon:"success",title:"已加入收藏"})):(this.favorite.splice(r,1),this.$swal.fire({icon:"success",title:"已移除收藏"}),this.getFavorites())}},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0}},mounted(){this.getProducts()}},F=t=>(y("data-v-fa7a80b2"),t=t(),L(),t),x=F(()=>e("section",{class:"banner"},[e("div",{class:"banner-content-wrap"},[e("h3",{class:"banner-title"},"收藏列表")])],-1)),w={class:"container"},I={class:"products"},S={class:"row g-0 py-4"},C=["src"],$={class:"product-feature-btn"},N=["onClick"],B=["onClick"],O={key:0},P={key:0,class:"bi bi-suit-heart-fill"},V={key:1,class:"bi bi-suit-heart"},J={class:"product-feature-text"},z={class:"city-sub-name"},D={class:"city-name"};function E(t,r,c,G,a,d){const l=g("Loading");return o(),i("div",null,[p(l,{active:a.isLoading,"z-index":1e3},null,8,["active"]),x,e("div",w,[e("section",I,[e("div",S,[(o(!0),i(f,null,v(a.favoritesList,s=>(o(),i("div",{key:s.id,class:"col-md-4 product-feature my-3 mx-3"},[e("img",{src:s.imageUrl,alt:"product-img"},null,8,C),e("div",$,[e("button",{ref_for:!0,ref:"product-detail",button:"",type:"button",class:"btn btn-primary btn-lg",onClick:_=>t.$router.push({path:`/productList/${s.id}`})}," 查看商品 ",8,N)]),e("a",{href:"#",class:"like",onClick:b(_=>d.toggleFavorite(s.id),["prevent"])},[a.favorite.includes(s.id)?(o(),i("span",O,[a.favorite.includes(s.id)?(o(),i("i",P)):m("",!0)])):(o(),i("i",V))],8,B),e("div",J,[e("small",z,n(s.category),1),e("p",D,n(s.title),1)])]))),128))])])])])}const U=u(k,[["render",E],["__scopeId","data-v-fa7a80b2"]]);export{U as default};
