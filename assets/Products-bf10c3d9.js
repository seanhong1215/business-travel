import{P as f}from"./Pagination-e772eec6.js";import{c as b}from"./cartStore-065266f6.js";import{_ as k,m as P,c as d,b as p,d as t,n,F as h,r as C,f as v,o as u,t as c,p as w,i as x}from"./index-fc8d34cb.js";const y={name:"Products",components:{Pagination:f},data(){return{products:[],pagination:{},isLoading:!1,currentPage:1,category:"",isActive:"",loadingStatus:{loadingItem:""},favorite:JSON.parse(localStorage.getItem("favorite"))||[]}},methods:{getProducts(e=1,s){this.isActive=s,this.currentPage=e,this.isLoading=!0;let l=`https://vue3-course-api.hexschool.io/v2/api/shinyhung/products?page=${e}`;s?l=`https://vue3-course-api.hexschool.io/v2/api/shinyhung/products?category=${s}`:this.isActive="all",this.$http.get(l).then(r=>{this.products=r.data.products,this.pagination=r.data.pagination,this.isLoading=!1}).catch(r=>{this.isLoading=!1,this.$swal.fire({icon:"error",title:r.response.data.message})})},toggleFavorite(e){const s=this.favorite.findIndex(l=>l===e);s===-1?(this.favorite.push(e),this.$swal.fire({icon:"success",title:"已加入收藏"})):(this.favorite.splice(s,1),this.$swal.fire({icon:"success",title:"已移除收藏"}),this.getFavorites())},addCart(e,s=1){this.loadingStatus.loadingItem=e;const l={product_id:e,qty:s},r="https://vue3-course-api.hexschool.io/v2/api/shinyhung/cart";this.$http.post(r,{data:l}).then(o=>{this.$swal.fire({icon:"success",title:o.data.message}),this.getCarts(),this.loadingStatus.loadingItem=""}).catch(o=>{this.$swal.fire({icon:"error",title:o.response.data.message})})},...P(b,["getCarts"])},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0}},mounted(){this.getProducts()}},S=e=>(w("data-v-ada09bc0"),e=e(),x(),e),$=S(()=>t("section",{class:"banner"},[t("div",{class:"banner-content-wrap"},[t("h3",{class:"banner-title"},"旅遊規劃")])],-1)),I={class:"container"},A={class:"products-wrap"},L={class:"row g-5"},N={class:"col-md-4"},F={class:"list-group",id:"list-tab",role:"tablist"},B={class:"col-md-8"},E={class:"row g-0"},z=["onClick"],J=["src"],O={class:"product-feature-btn"},T={class:"col-md-8"},V={class:"card-body d-flex flex-column h-100"},Y={class:"card-title"},j={class:"card-text"},D={class:"card-text d-flex justify-content-between mt-auto pt-4"},U={class:"text-muted"},q={class:"text-muted"},G=["disabled","onClick"];function H(e,s,l,r,o,a){const m=v("Loading"),_=v("pagination");return u(),d(h,null,[p(m,{active:o.isLoading,"z-index":1e3},null,8,["active"]),$,t("div",I,[t("div",A,[t("div",L,[t("div",N,[t("div",F,[t("a",{class:n(["list-group-item list-group-item-action",{active:o.isActive==="all"}]),id:"list-home-list","data-bs-toggle":"list",href:"#list-all",role:"tab","aria-controls":"list-all",onClick:s[0]||(s[0]=i=>a.getProducts(1))},"全部",2),t("a",{class:n(["list-group-item list-group-item-action",{active:o.isActive==="海"}]),id:"list-profile-list","data-bs-toggle":"list",href:"#list-island",role:"tab","aria-controls":"list-island",onClick:s[1]||(s[1]=i=>a.getProducts(1,"海"))},"聖托里尼島",2),t("a",{class:n(["list-group-item list-group-item-action",{active:o.isActive==="自然與冒險"}]),id:"list-messages-list","data-bs-toggle":"list",href:"#list-blueSpa",role:"tab","aria-controls":"list-blueSpa",onClick:s[2]||(s[2]=i=>a.getProducts(1,"自然與冒險"))},"藍湖溫泉",2),t("a",{class:n(["list-group-item list-group-item-action",{active:o.isActive==="歷史文化"}]),id:"list-settings-list","data-bs-toggle":"list",href:"#list-kyoto",role:"tab","aria-controls":"list-kyoto",onClick:s[3]||(s[3]=i=>a.getProducts(1,"歷史文化"))},"京都美山町",2),t("a",{class:n(["list-group-item list-group-item-action",{active:o.isActive==="家庭海灘"}]),id:"list-settings-list","data-bs-toggle":"list",href:"#list-maldives",role:"tab","aria-controls":"list-maldives",onClick:s[4]||(s[4]=i=>a.getProducts(1,"家庭海灘"))},"馬爾地夫",2),t("a",{class:n(["list-group-item list-group-item-action",{active:o.isActive==="異國情調的海灘"}]),id:"list-settings-list","data-bs-toggle":"list",href:"#list-portugal",role:"tab","aria-controls":"list-portugal",onClick:s[5]||(s[5]=i=>a.getProducts(1,"異國情調的海灘"))},"葡萄牙",2),t("a",{class:n(["list-group-item list-group-item-action",{active:o.isActive==="國際大都市"}]),id:"list-settings-list","data-bs-toggle":"list",href:"#list-newYork",role:"tab","aria-controls":"list-newYork",onClick:s[6]||(s[6]=i=>a.getProducts(1,"國際大都市"))},"紐約",2)])]),t("div",B,[(u(!0),d(h,null,C(o.products,i=>(u(),d("div",{key:i.id,class:"card mb-3"},[t("div",E,[t("div",{class:"col-md-4 product-feature",onClick:g=>e.$router.push({path:`/productList/${i.id}`})},[t("img",{src:i.imageUrl,class:"img-fluid rounded-start h-100"},null,8,J),t("div",O,[t("button",{ref_for:!0,ref:"product-detail",button:"",type:"button",class:"btn btn-primary text-white",onClick:s[7]||(s[7]=g=>e.$router.push({path:"/productList"}))}," 查看商品 ",512)])],8,z),t("div",T,[t("div",V,[t("h5",Y,c(i.title),1),t("p",j,c(i.description),1),t("p",D,[t("del",U,"NT$"+c(i.price),1),t("small",q,"NT$"+c(i.origin_price),1)]),t("button",{type:"button",class:"btn btn-primary w-100 text-white mt-2",disabled:o.loadingStatus.loadingItem===i.id||!i.is_enabled,onClick:g=>a.addCart(i.id)}," 加入購物車 ",8,G)])])])]))),128)),p(_,{pages:o.pagination,onEmitPages:a.getProducts},null,8,["pages","onEmitPages"])])])])])],64)}const R=k(y,[["render",H],["__scopeId","data-v-ada09bc0"]]);export{R as default};
